<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Philip Mcmahon</title>
 <link href="http://snaggled.github.com/atom.xml" rel="self"/>
 <link href="http://snaggled.github.com/"/>
 <updated>2009-03-16T22:21:25-06:00</updated>
 <id>http://snaggled.github.com/</id>
 <author>
   <name>Philip Mcmahon</name>
   <email>philip@packetnode.com</email>
 </author>

 
 <entry>
   <title>Too Many Open Files in Rails - Temp Files in Mongrel</title>
   <link href="http://snaggled.github.com/2009/03/16/temp-files-in-mongrel.html"/>
   <updated>2009-03-16T00:00:00-06:00</updated>
   <id>http://snaggled.github.com/2009/03/16/temp-files-in-mongrel</id>
   <content type="html">&lt;h1&gt;Too Many Open Files in Rails &#8211; Temp Files in Mongrel&lt;/h1&gt;


	&lt;p class="meta"&gt;16 Mar 2009 &#8211; Denver, CO&lt;/p&gt;


	&lt;p&gt;I&#8217;ve had a whole bunch of pain the last couple of days with &lt;a href="http://mongrel.rubyforge.org/"&gt;mongrel&lt;/a&gt; dumping tmp files on me and filling up my ulimit quota causing Rails to fall over.&lt;/p&gt;


	&lt;p&gt;It started when I started posting a bunch of multi-part files to Rails and letting &lt;a href="http://github.com/technoweenie/attachment_fu/tree/master"&gt;attachment_fu&lt;/a&gt; do the dirty-work, but I quickly hit upon this:&lt;/p&gt;


&lt;pre&gt;
Processing DocumentsController#create to xml ...
...

MissingSourceFile (no such file to load -- .../git/eiger/app/models/document.rb):
    .../lib/active_support/dependencies.rb:382:in `load_without_new_constant_marking'
    .../lib/active_support/dependencies.rb:382:in `load_file'
    .../lib/active_support/dependencies.rb:521:in `new_constants_in'
&lt;/pre&gt;

	&lt;p&gt;A quick check meant:&lt;/p&gt;


&lt;pre&gt;
:eiger philipmcmahon$ ulimit -n
256
&lt;/pre&gt;

        and

&lt;pre&gt;
:~ philipmcmahon$ lsof /dev/disk0s2 | grep mongrel |  wc -l
245

philip-mcmahons-macbook-pro:~ philipmcmahon$ lsof /dev/disk0s2 | grep mongrel
ruby      25400 philipmcmahon    6u   REG   14,2    712224 13096890 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon    7u   REG   14,2    348977 13102715 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon    8u   REG   14,2    626096 13096931 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon    9u   REG   14,2   1350716 13097079 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon   10u   REG   14,2    203294 13096875 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon   11u   REG   14,2   2699790 13097300 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon   12u   REG   14,2    178210 13096959 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon   13u   REG   14,2    217603 13097577 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon   14u   REG   14,2   1348152 13097069 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
ruby      25400 philipmcmahon   15u   REG   14,2    203292 13096968 
/private/var/folders/+Z/+ZLlmYL1FlmQ5osVVIedbU+++TI/-Tmp-/mongrel25400-0
&lt;/pre&gt;

	&lt;p&gt;Holy shit!&lt;/p&gt;


	&lt;p&gt;I have no idea what those file-pointers are, but I do know that they are caused by the file part of multi-part form upload data. For a while I thought it was related to creating Tempfile classes, but after it while it became clear that it was mongrel doing whatever.&lt;/p&gt;


	&lt;p&gt;To cut a long story short, I switched to &lt;a href="http://www.webrick.org/"&gt;webrick&lt;/a&gt; and the problem went away.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Singleton classes or Eigenclasses</title>
   <link href="http://snaggled.github.com/2009/01/28/singletons_classes_or_eigenclasses.html"/>
   <updated>2009-01-28T00:00:00-07:00</updated>
   <id>http://snaggled.github.com/2009/01/28/singletons_classes_or_eigenclasses</id>
   <content type="html">&lt;h1&gt;Singleton classes or Eigenclasses&lt;/h1&gt;


	&lt;p class="meta"&gt;28 Jan 2009 &#8211; Miami, FL&lt;/p&gt;


	&lt;p&gt;Vegas for the week at a conference. In the Java world, &#8216;Singleton&#8217; (at least to me) usually referred to the design pattern which allowed you to ensure that there would always only be a maximum of one object instance of a particular class. It was usually implemented by making the constructor private and providing an access method that returned a single (usually static) instance of an singular object. It might looked something like this:&lt;/p&gt;


&lt;script src='http://pastie.org/373956.js'&gt;&lt;/script&gt;

	&lt;p&gt;Things appear to be slightly different in the Ruby world. A &lt;i&gt;singleton&lt;/i&gt; or &lt;i&gt;eigenclass&lt;/i&gt; in the Ruby world refers to a particular instance of an object, and ruby allows us to override the methods and behaviors of a particular object (note &#8211; not class).&lt;/p&gt;


&lt;pre&gt;
    ?&gt; class A
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; a = A.new
    =&gt; #&lt;A:0x5ef664&gt;
    &gt;&gt; b = A.new
    =&gt; #&lt;A:0x5ee1d8&gt;
    &gt;&gt; 
    ?&gt; class &lt;&lt; a
    &gt;&gt; def to_s; "Instance method"; end
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; a
    =&gt; Instance method
    &gt;&gt; b
    =&gt; #&lt;A:0x5ee1d8&gt;
&lt;/pre&gt;

	&lt;p&gt;For more checkout: &lt;a href="http://whytheluckystiff.net/articles/seeingMetaclassesClearly.html"&gt;whytheluckystiff&lt;/a&gt;.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Multiple Inheritance in Ruby</title>
   <link href="http://snaggled.github.com/2009/01/25/multiple-inheritance-in-ruby.html"/>
   <updated>2009-01-25T00:00:00-07:00</updated>
   <id>http://snaggled.github.com/2009/01/25/multiple-inheritance-in-ruby</id>
   <content type="html">&lt;h1&gt;Multiple Inheritance in Ruby&lt;/h1&gt;


	&lt;p class="meta"&gt;16 Jan 2009 &#8211; Miami, FL&lt;/p&gt;


	&lt;p&gt;I&#8217;m in Miami for a couple of days on business and spent the plane journey reading up on Ruby &lt;i&gt;Mixins&lt;/i&gt; and how it gets around the multiple inheritance problem.&lt;/p&gt;


	&lt;p&gt;Coming from a Java background, where there was no multiple inheritance (&lt;i&gt;technically&lt;/i&gt; there isn&#8217;t any in Ruby either), the solution to this one was pretty interesting to me. Ruby uses the concept of a &lt;i&gt;Mixin&lt;/i&gt; which is really just a module. A module can&#8217;t be instantiated and is just a set of functionality.&lt;/p&gt;


&lt;pre&gt;
    ?&gt; module Mixin
    &gt;&gt; def mixin_method
    &gt;&gt; "Mixin method" 
    &gt;&gt; end
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; class A
    &gt;&gt; include Mixin
    &gt;&gt; end
    =&gt; A
    &gt;&gt; 
    ?&gt; a = A.new
    &gt;&gt; a.mixin_method
    =&gt; "Mixin method" 
&lt;/pre&gt; 

	&lt;p&gt;Where it gets interesting (and the reason Java never supported multiple inheritance) is what to do if we have conflicting methods in our superclasses (&lt;i&gt;&#8220;Diamond Problem&#8221;&lt;/i&gt; anyone ?). Technically, Ruby does not support multiple inheritance, but you can mixin multiple modules into other classes or modules. How does Ruby deal with the diamond problem ? Well it basically uses the last method to be included. You can see below, that the returned method is based on the last one to be introduced to the lookup chain.&lt;/p&gt;


&lt;pre&gt;
    ?&gt; module MixinA
    &gt;&gt; def hello
    &gt;&gt; "hello from A" 
    &gt;&gt; end
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; module MixinB
    &gt;&gt; def hello
    &gt;&gt; "hello from B" 
    &gt;&gt; end
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; class C
    &gt;&gt; include MixinA
    &gt;&gt; include MixinB
    &gt;&gt; end
    =&gt; C
    &gt;&gt; 
    ?&gt; c = C.new
    =&gt; #&lt;C:0x5e6550&gt;
    &gt;&gt; c.hello
    =&gt; "hello from B" 
    &gt;&gt; 
    ?&gt; class D
    &gt;&gt; include MixinB
    &gt;&gt; include MixinA
    &gt;&gt; end
    =&gt; D
    &gt;&gt; 
    ?&gt; d = D.new
    =&gt; #&lt;D:0x5e0ca4&gt;
    &gt;&gt; d.hello
    =&gt; "hello from A" 
&lt;/pre&gt;

	&lt;p&gt;And thats it. You can also include a module in another module, just like normal inheritance. Module is actually a super-class of Class, but classes cannot be mixed-in to other classes, only Modules can.&lt;/p&gt;


&lt;pre&gt;
    &gt;&gt; module MixinA
    &gt;&gt; def hello
    &gt;&gt; "hello" 
    &gt;&gt; end
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; module MixinB
    &gt;&gt; include MixinA
    &gt;&gt; def hello2
    &gt;&gt; "hello2" 
    &gt;&gt; end
    &gt;&gt; end
    =&gt; nil
    &gt;&gt; 
    ?&gt; class C
    &gt;&gt; include MixinB
    &gt;&gt; end
    =&gt; C
    &gt;&gt; 
    ?&gt; c = C.new
    =&gt; #&lt;C:0x5e7608&gt;
    &gt;&gt; c.hello
    =&gt; "hello" 
    &gt;&gt; c.hello2
    =&gt; "hello2" 
&lt;/pre&gt;

	&lt;p&gt;For a more complete introduction, of course you can simply &lt;i&gt;`ri Module`&lt;/i&gt;.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Did the pastie break my repo display ?</title>
   <link href="http://snaggled.github.com/2009/01/16/did-the-pastie-break-my-repo-display.html"/>
   <updated>2009-01-16T00:00:00-07:00</updated>
   <id>http://snaggled.github.com/2009/01/16/did-the-pastie-break-my-repo-display</id>
   <content type="html">&lt;h1&gt;Did the pastie break my repo display ?&lt;/h1&gt;


	&lt;p class="meta"&gt;16 Jan 2009 &#8211; Denver, CO&lt;/p&gt;


	&lt;p&gt;For some weird reason the repo display wasn&#8217;t showing in the &lt;a href="http://snaggled.github.com/2008/12/29/using-the-github-api-to-display-your-repos.html"&gt;last post&lt;/a&gt;. The only thing different about it was the pastie, e.g.&lt;/p&gt;


&lt;pre&gt;
&lt;script src='http://pastie.org/349089.js'&gt;&lt;/script&gt;
&lt;/pre&gt;

	&lt;p&gt;If I make this the last line of text before its piped thru &lt;a href="http://github.com/mojombo/jekyll"&gt;jekyll&lt;/a&gt;, the repo-display Javascript fails. Wierdness.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>We are up and running</title>
   <link href="http://snaggled.github.com/2008/12/29/We are up and running.html"/>
   <updated>2008-12-29T00:00:00-07:00</updated>
   <id>http://snaggled.github.com/2008/12/29/We are up and running</id>
   <content type="html">&lt;h1&gt;We are up and running&lt;/h1&gt;


	&lt;p class="meta"&gt;29 Dec 2008 &#8211; Draperstown, Northern Ireland&lt;/p&gt;


	&lt;p&gt;Bringing the blog up was pretty painless, and full kudos must go to &lt;a href="http://mojombo.github.com"&gt;mojombo&lt;/a&gt; for both the sweet &lt;a href="http://github.com/mojombo/jekyll"&gt;jekyll&lt;/a&gt; idea and tool, and even css style (yes, I was that lazy). I love the ability to blog via a git commit, very cool and minimal overhead. The &lt;a href="http://hobix.com/textile/"&gt;Textile&lt;/a&gt; format is pretty new to me (I know &#8211; where have I been ?) but I&#8217;m really enjoying it.&lt;/p&gt;


	&lt;p&gt;With regard to the whole &lt;a href="http://git.or.cz/"&gt;git&lt;/a&gt; vs &lt;a href="http://subversion.tigris.org/"&gt;svn&lt;/a&gt; thing, I didn&#8217;t really have any problems with svn, although the merging process could be a little annoying. I&#8217;ve been using &lt;a href="http://svnrepository.com/"&gt;these guys&lt;/a&gt; for a while without complaint, so I&#8217;d recommend them if you are taking the svn path. If the git and &lt;a href="http://github.com"&gt;github&lt;/a&gt; thing works out I may end end moving away from those guys. So far I like the distributed repo aspect of git &#8211; the fact I can commit to a local repo and its almost instant, and then push to a remote when I am ready, is great.&lt;/p&gt;


	&lt;p&gt;I&#8217;ve been planning some big changes to &lt;a href="http://geosack.com"&gt;geosack.com&lt;/a&gt; (very interested in location based services at the minute), so it may be the first victim to be migrated to &lt;a href="http://github.com"&gt;github&lt;/a&gt;. Last remaining item on the list is to find &#38; install a git bundle for &lt;a href="http://macromates.com/"&gt;Textmate&lt;/a&gt;.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Using the GitHub API to Display your Repositories</title>
   <link href="http://snaggled.github.com/2008/12/29/using-the-github-api-to-display-your-repos.html"/>
   <updated>2008-12-29T00:00:00-07:00</updated>
   <id>http://snaggled.github.com/2008/12/29/using-the-github-api-to-display-your-repos</id>
   <content type="html">&lt;h1&gt;Using the GitHub &lt;span class="caps"&gt;API&lt;/span&gt; to Display your Repositories&lt;/h1&gt;


	&lt;p class="meta"&gt;29 Dec 2008 &#8211; Draperstown, Northern Ireland&lt;/p&gt;


	&lt;p&gt;I wanted to display a list of my repositories on my homepage. Spent a while fluffing about with the &lt;a href="http://docs.jquery.com/Ajax/jQuery.getJSON"&gt;jQuery.getJSON&lt;/a&gt; call, but in the end found it preferable to use the callback parameter combined with &lt;a href="http://docs.jquery.com/Ajax/jQuery.getScript"&gt;jQuery.getScript&lt;/a&gt;.&lt;/p&gt;


	&lt;p&gt;Heres the code, which will populate a div with the id &#8216;repos&#8217;:&lt;/p&gt;


&lt;script src='http://pastie.org/349089.js'&gt;&lt;/script&gt;</content>
 </entry>
 
 <entry>
   <title>Switching to Git (and GitHub)</title>
   <link href="http://snaggled.github.com/2008/12/28/switching-to-git.html"/>
   <updated>2008-12-28T00:00:00-07:00</updated>
   <id>http://snaggled.github.com/2008/12/28/switching-to-git</id>
   <content type="html">&lt;h1&gt;Switching to Git (and GitHub)&lt;/h1&gt;


	&lt;p class="meta"&gt;28 Dec 2008 &#8211; Moy, Northern Ireland&lt;/p&gt;


	&lt;p&gt;Decided to finally make the move from &lt;a href="http://subversion.tigris.org/"&gt;svn&lt;/a&gt; to &lt;a href="http://git.or.cz/"&gt;git&lt;/a&gt; for all my projects, and in the process am considering a move to &lt;a href="http://github.com"&gt;GitHub&lt;/a&gt;, so we&#8217;ll see how this goes. Mikey Finn is sitting here playing &lt;span class="caps"&gt;COD&lt;/span&gt; World at War, so I&#8217;m doing this to a soundtrack of explosions and death.&lt;/p&gt;


	&lt;p&gt;Will probably spend a couple hours playing with &lt;a href="http://github.com/mojombo/jekyll/tree/master"&gt;Jekyll&lt;/a&gt; and if things look good, will start the migration of &lt;a href="http://geosack.com"&gt;Geosack&lt;/a&gt;.&lt;/p&gt;</content>
 </entry>
 
 
</feed>